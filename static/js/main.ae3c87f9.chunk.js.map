{"version":3,"sources":["components/firebase.js","components/Login.js","components/WeatherEffect.js","components/Quiz.js","components/Admin.js","App.js","reportWebVitals.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getDatabase","Login","username","setUsername","useState","role","setRole","error","setError","navigate","useNavigate","React","createElement","className","onSubmit","async","e","preventDefault","userRef","ref","set","score","completedQuestions","isPlaying","sessionStorage","setItem","JSON","stringify","console","htmlFor","id","type","value","onChange","target","placeholder","WeatherEffect","_ref","duration","visible","setVisible","randomOffset","setRandomOffset","x","Math","random","y","rotation","useEffect","timer","setTimeout","clearTimeout","style","transform","renderRain","drops","i","push","key","animationDuration","renderSun","rays","Quiz","currentQuestion","setCurrentQuestion","setScore","showScore","setShowScore","showWeatherEffect","setShowWeatherEffect","questions","setQuestions","showStoryInput","setShowStoryInput","story","setStory","currentQuestionId","setCurrentQuestionId","timeLeft","setTimeLeft","timerActive","setTimerActive","imageRevealClass","setImageRevealClass","isRevealComplete","setIsRevealComplete","currentPlayer","getItem","playerRef","timestamp","Date","now","stories","catch","selectedQuestions","questionsData","sort","slice","setInterval","prev","newTime","revealPercentage","floor","min","clearInterval","length","width","onClick","handleRetry","handleLogout","removeItem","trim","playerData","get","val","currentStories","questionId","nextQuestion","required","Fragment","src","imageUrl","alt","onError","question","options","map","option","index","isCorrect","selectedAnswer","correctAnswer","newScore","effect","Array","keys","q","handleAnswerClick","Admin","players","setPlayers","loading","setLoading","playersRef","unsubscribe","onValue","snapshot","exists","playersData","playersArray","Object","entries","filter","_","data","_ref2","a","b","player","_player$completedQues","toLocaleString","colSpan","App","Router","basename","Routes","Route","exact","path","element","reportWebVitals","onPerfEntry","Function","__webpack_require__","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.ae3c87f9.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics, getGoogleAnalyticsClientId } from \"firebase/analytics\";\nimport { getDatabase, ref, set, get, onValue } from \"firebase/database\";\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCSHjU7DgtcqFAN067UM1fj4J8h-2hqaUE\",\n  authDomain: \"quizgame-dd714.firebaseapp.com\",\n  databaseURL: \"https://quizgame-dd714-default-rtdb.asia-southeast1.firebasedatabase.app\",\n  projectId: \"quizgame-dd714\",\n  storageBucket: \"quizgame-dd714.firebasestorage.app\",\n  messagingSenderId: \"164919175813\",\n  appId: \"1:164919175813:web:caecd6e8d35d3f848ad7ec\",\n  measurementId: \"G-58CQ6070C8\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase(app);\n\nexport { db, ref, set, get, onValue };","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { db, ref, get, set } from './firebase';\nimport '../styles/index.css';\n\nconst Login = () => {\n    const [username, setUsername] = useState('');\n    const [role, setRole] = useState('player');\n    const [error, setError] = useState('');\n    const navigate = useNavigate();\n\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        if (username && role) {\n            try {\n                const userRef = ref(db, `users/${username}`);\n                await set(userRef, {\n                    username,\n                    role,\n                    score: 0,\n                    completedQuestions: [],\n                    isPlaying: false\n                });\n                sessionStorage.setItem('currentPlayer', JSON.stringify({ username, role }));\n                if (role === 'admin') {\n                    navigate('/admin');\n                } else {\n                    navigate('/quiz');\n                }\n            } catch (error) {\n                console.error('Error logging in:', error);\n                setError('Đã có lỗi xảy ra. Vui lòng thử lại.');\n            }\n        }\n    };\n\n    return (\n        <div className=\"container\">\n            <div className=\"login-container fade-in\">\n                <h1>Quiz Game Login</h1>\n\n                {error && (\n                    <div className=\"error-message\">\n                        {error}\n                    </div>\n                )}\n\n                <form onSubmit={handleLogin} className=\"login-form\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"username\">Username</label>\n                        <input\n                            id=\"username\"\n                            type=\"text\"\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                            placeholder=\"Enter your username\"\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"role\">Role</label>\n                        <select\n                            id=\"role\"\n                            value={role}\n                            onChange={(e) => setRole(e.target.value)}\n                        >\n                            <option value=\"player\">Player</option>\n                            <option value=\"admin\">Admin</option>\n                        </select>\n                    </div>\n\n                    <button type=\"submit\" className=\"btn btn-primary\">\n                        Login\n                    </button>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default Login; ","import React, { useEffect, useState } from 'react';\nimport '../styles/weather.css';\n\nconst WeatherEffect = ({ type, duration = 2000 }) => {\n    const [visible, setVisible] = useState(true);\n    const [randomOffset, setRandomOffset] = useState({\n        x: Math.random() * 100 - 50,\n        y: Math.random() * 100 - 50,\n        rotation: Math.random() * 360\n    });\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setVisible(false);\n        }, duration);\n\n        return () => clearTimeout(timer);\n    }, [duration]);\n\n    if (!visible) return null;\n\n    const renderRain = () => {\n        const drops = [];\n        for (let i = 0; i < 10; i++) {\n            drops.push(\n                <div\n                    key={i}\n                    className=\"raindrop\"\n                    style={{\n                        animationDuration: `${Math.random() * 0.5 + 0.5}s`,\n                        transform: `translateX(${Math.random() * 100}%) rotate(${Math.random() * 30 - 15}deg)`\n                    }}\n                />\n            );\n        }\n        return <div className=\"rain\">{drops}</div>;\n    };\n\n    const renderSun = () => {\n        const rays = [];\n        for (let i = 0; i < 10; i++) {\n            rays.push(\n                <div\n                    key={i}\n                    className=\"sun-ray\"\n                    style={{\n                        animationDuration: `${Math.random() * 2 + 2}s`,\n                        transform: `rotate(${i * 36}deg) translateZ(${Math.random() * 20 + 10}px)`\n                    }}\n                />\n            );\n        }\n        return (\n            <div className=\"sun\">\n                <div className=\"sun-rays\" style={{ transform: `rotateX(${randomOffset.rotation}deg) rotateY(${randomOffset.rotation}deg)` }}>\n                    {rays}\n                    <div className=\"sun-core\" />\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div\n            className=\"weather-effect\"\n            style={{\n                transform: `translate(${randomOffset.x}px, ${randomOffset.y}px)`\n            }}\n        >\n            {type === 'rain' ? renderRain() : renderSun()}\n        </div>\n    );\n};\n\nexport default WeatherEffect; ","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { db, ref, set, get } from './firebase';\nimport WeatherEffect from './WeatherEffect';\nimport '../styles/index.css';\nimport questionsData from '../data/questions.json';\n\nconst Quiz = () => {\n    const [currentQuestion, setCurrentQuestion] = useState(0);\n    const [score, setScore] = useState(0);\n    const [showScore, setShowScore] = useState(false);\n    const [username, setUsername] = useState('');\n    const [showWeatherEffect, setShowWeatherEffect] = useState(null);\n    const [questions, setQuestions] = useState([]);\n    const [showStoryInput, setShowStoryInput] = useState(false);\n    const [story, setStory] = useState('');\n    const [currentQuestionId, setCurrentQuestionId] = useState(null);\n    const [timeLeft, setTimeLeft] = useState(15);\n    const [timerActive, setTimerActive] = useState(true);\n    const [imageRevealClass, setImageRevealClass] = useState('reveal-image');\n    const [isRevealComplete, setIsRevealComplete] = useState(false);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const currentPlayer = sessionStorage.getItem('currentPlayer');\n        if (!currentPlayer) {\n            navigate('/');\n            return;\n        }\n        setUsername(currentPlayer);\n\n        // Initialize player status\n        const playerRef = ref(db, `players/${currentPlayer}`);\n        set(playerRef, {\n            score: 0,\n            completedQuestions: [],\n            currentQuestion: 1,\n            isPlaying: true,\n            timestamp: Date.now(),\n            stories: {}\n        }).catch(error => {\n            console.error('Error initializing player status:', error);\n        });\n\n        // Select random questions\n        const allQuestions = questionsData.questions;\n        const shuffledQuestions = [...allQuestions].sort(() => Math.random() - 0.5);\n        const selectedQuestions = shuffledQuestions.slice(0, 10);\n        setQuestions(selectedQuestions);\n    }, [navigate]);\n\n    // Timer effect\n    useEffect(() => {\n        if (timerActive && timeLeft > 0 && !showStoryInput && !showScore) {\n            const timer = setTimeout(() => {\n                setTimeLeft(timeLeft - 1);\n            }, 1000);\n            return () => clearTimeout(timer);\n        } else if (timeLeft === 0 && timerActive) {\n            // Time's up, handle as incorrect answer\n            setTimerActive(false);\n            setCurrentQuestionId(questions[currentQuestion].id);\n            setShowStoryInput(true);\n        }\n    }, [timeLeft, timerActive, currentQuestion, questions, showStoryInput, showScore]);\n\n    // Reset timer when moving to next question\n    useEffect(() => {\n        if (!showStoryInput && !showScore) {\n            setTimeLeft(15);\n            setTimerActive(true);\n        }\n    }, [currentQuestion, showStoryInput, showScore]);\n\n    // Reset hiệu ứng khi chuyển câu hỏi\n    useEffect(() => {\n        setImageRevealClass('reveal-image');\n        setIsRevealComplete(false);\n    }, [currentQuestion]);\n\n    const handleTimeUp = () => {\n        setTimerActive(false);\n        setCurrentQuestionId(questions[currentQuestion].id);\n        setShowStoryInput(true);\n    };\n\n    // Timer effect\n    useEffect(() => {\n        if (timeLeft > 0 && !showStoryInput && !showScore) {\n            const timer = setInterval(() => {\n                setTimeLeft((prev) => {\n                    const newTime = prev - 1;\n                    // Cập nhật hiệu ứng hiển thị hình ảnh\n                    const revealPercentage = Math.floor((1 - newTime / 20) * 100);\n                    setImageRevealClass(`reveal-image-${Math.min(revealPercentage, 100)}`);\n\n                    if (revealPercentage >= 100) {\n                        setIsRevealComplete(true);\n                    }\n\n                    return newTime;\n                });\n            }, 1000);\n\n            return () => clearInterval(timer);\n        } else if (timeLeft === 0 && !showStoryInput && !showScore) {\n            handleTimeUp();\n        }\n    }, [timeLeft, showStoryInput, showScore]);\n\n    const handleAnswerClick = async (selectedAnswer) => {\n        setTimerActive(false);\n        const isCorrect = selectedAnswer === questions[currentQuestion].correctAnswer;\n        const newScore = isCorrect ? score + 1 : score;\n        setScore(newScore);\n\n        if (isCorrect) {\n            // Randomly choose between rain and sun effect\n            const effect = Math.random() > 0.5 ? 'rain' : 'sun';\n            setShowWeatherEffect(effect);\n            setTimeout(() => setShowWeatherEffect(null), 2000);\n        } else {\n            // Show story input for incorrect answer\n            setCurrentQuestionId(questions[currentQuestion].id);\n            setShowStoryInput(true);\n            return; // Don't proceed to next question until story is submitted\n        }\n\n        const nextQuestion = currentQuestion + 1;\n        const playerRef = ref(db, `players/${username}`);\n\n        try {\n            if (nextQuestion < questions.length) {\n                await set(playerRef, {\n                    score: newScore,\n                    completedQuestions: [...Array(currentQuestion + 1).keys()].map(i => i + 1),\n                    currentQuestion: nextQuestion + 1,\n                    isPlaying: true,\n                    timestamp: Date.now()\n                });\n                setCurrentQuestion(nextQuestion);\n            } else {\n                await set(playerRef, {\n                    score: newScore,\n                    completedQuestions: questions.map(q => q.id),\n                    currentQuestion: null,\n                    isPlaying: false,\n                    timestamp: Date.now()\n                });\n                setShowScore(true);\n            }\n        } catch (error) {\n            console.error('Error updating player status:', error);\n        }\n    };\n\n    const handleStorySubmit = async (e) => {\n        e.preventDefault();\n        if (!story.trim()) return;\n\n        const playerRef = ref(db, `players/${username}`);\n        try {\n            // Get current player data\n            const snapshot = await get(playerRef);\n            const playerData = snapshot.val() || {};\n            const currentStories = playerData.stories || {};\n\n            // Add new story\n            currentStories[currentQuestionId] = {\n                story: story.trim(),\n                timestamp: Date.now(),\n                questionId: currentQuestionId\n            };\n\n            // Update player data with new story\n            await set(playerRef, {\n                ...playerData,\n                stories: currentStories\n            });\n\n            // Reset story input and proceed to next question\n            setStory('');\n            setShowStoryInput(false);\n            setCurrentQuestionId(null);\n\n            // Move to next question\n            const nextQuestion = currentQuestion + 1;\n            if (nextQuestion < questions.length) {\n                setCurrentQuestion(nextQuestion);\n            } else {\n                setShowScore(true);\n            }\n        } catch (error) {\n            console.error('Error saving story:', error);\n        }\n    };\n\n    const handleRetry = () => {\n        setCurrentQuestion(0);\n        setScore(0);\n        setShowScore(false);\n        setShowStoryInput(false);\n        setTimeLeft(20);\n        setTimerActive(true);\n        navigate('/quiz');\n    };\n\n    const handleLogout = () => {\n        sessionStorage.removeItem('currentPlayer');\n        navigate('/');\n    };\n\n    if (!username || questions.length === 0) {\n        return <div className=\"container\">Loading...</div>;\n    }\n\n    return (\n        <div className=\"container\">\n            {showWeatherEffect && <WeatherEffect type={showWeatherEffect} />}\n            <div className=\"quiz-container fade-in\">\n                <div className=\"quiz-header\">\n                    <span>Question {currentQuestion + 1}/{questions.length}</span>\n                    <div className=\"timer-container\">\n                        <div className=\"timer-text\">\n                            <span>Time Left: </span>\n                            <span className={timeLeft <= 5 ? 'time-warning' : ''}>{timeLeft}s</span>\n                        </div>\n                        <div className=\"timer-progress\">\n                            <div\n                                className={`timer-progress-bar ${timeLeft <= 5 ? 'warning' : ''}`}\n                                style={{ width: `${(timeLeft / 15) * 100}%` }}\n                            />\n                        </div>\n                    </div>\n                    <span>Score: {score}</span>\n                </div>\n\n                {showScore ? (\n                    <div className=\"quiz-score\">\n                        <h2>Quiz Completed!</h2>\n                        <p>You scored {score} out of {questions.length}</p>\n                        <div className=\"quiz-actions\">\n                            <button onClick={handleRetry} className=\"btn btn-primary\">\n                                Try Again\n                            </button>\n                            <button onClick={handleLogout} className=\"btn btn-secondary\">\n                                Logout\n                            </button>\n                        </div>\n                    </div>\n                ) : showStoryInput ? (\n                    <div className=\"story-input\">\n                        <h2>Oops! {timeLeft === 0 ? \"Time's up!\" : \"That's not correct.\"}</h2>\n                        <p>Please share a short story or experience related to this question:</p>\n                        <form onSubmit={handleStorySubmit}>\n                            <textarea\n                                value={story}\n                                onChange={(e) => setStory(e.target.value)}\n                                placeholder=\"Share your story here...\"\n                                className=\"story-textarea\"\n                                required\n                            />\n                            <button type=\"submit\" className=\"btn btn-primary\">\n                                Submit Story\n                            </button>\n                        </form>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"quiz-question\">\n                            <div className={`question-image-container ${isRevealComplete ? 'reveal-complete' : ''}`}>\n                                <img\n                                    src={questions[currentQuestion].imageUrl}\n                                    alt=\"Gợi ý câu hỏi\"\n                                    className={`question-image ${imageRevealClass}`}\n                                    onError={(e) => {\n                                        e.target.src = 'https://via.placeholder.com/300x200?text=No+Image';\n                                    }}\n                                />\n                            </div>\n                            <h2 className=\"question-text\">{questions[currentQuestion].question}</h2>\n                        </div>\n                        <div className=\"quiz-options\">\n                            {questions[currentQuestion].options.map((option, index) => (\n                                <button\n                                    key={index}\n                                    onClick={() => handleAnswerClick(option)}\n                                    className=\"option-button\"\n                                >\n                                    {option}\n                                </button>\n                            ))}\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Quiz; ","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { db, ref, onValue } from './firebase';\nimport '../styles/index.css';\n\nconst Admin = () => {\n    const [players, setPlayers] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const playersRef = ref(db, 'players');\n\n        // Set up real-time listener\n        const unsubscribe = onValue(playersRef, (snapshot) => {\n            try {\n                if (snapshot.exists()) {\n                    const playersData = snapshot.val();\n                    const playersArray = Object.entries(playersData)\n                        .filter(([_, data]) => data !== null) // Filter out null entries\n                        .map(([username, data]) => ({\n                            username,\n                            ...data\n                        }));\n\n                    // Sort by score (highest first)\n                    playersArray.sort((a, b) => (b.score || 0) - (a.score || 0));\n                    setPlayers(playersArray);\n                } else {\n                    setPlayers([]);\n                }\n            } catch (error) {\n                console.error('Error processing player data:', error);\n                setPlayers([]);\n            } finally {\n                setLoading(false);\n            }\n        }, (error) => {\n            console.error('Error fetching players:', error);\n            setLoading(false);\n            setPlayers([]);\n        });\n\n        // Cleanup listener on unmount\n        return () => unsubscribe();\n    }, []);\n\n    const handleLogout = () => {\n        sessionStorage.removeItem('currentPlayer');\n        navigate('/');\n    };\n\n    if (loading) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"container\">\n            <div className=\"admin-container fade-in\">\n                <div className=\"admin-header\">\n                    <h1>Admin Dashboard</h1>\n                    <button\n                        onClick={handleLogout}\n                        className=\"btn btn-secondary\"\n                    >\n                        Logout\n                    </button>\n                </div>\n\n                <div className=\"table-responsive\">\n                    <table className=\"admin-table\">\n                        <thead>\n                            <tr>\n                                <th>Rank</th>\n                                <th>Username</th>\n                                <th>Current Score</th>\n                                <th>Questions Answered</th>\n                                <th>Current Question</th>\n                                <th>Status</th>\n                                <th>Last Updated</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {players.map((player, index) => (\n                                <tr key={player.username}>\n                                    <td>{index + 1}</td>\n                                    <td>{player.username}</td>\n                                    <td>{player.score || 0}</td>\n                                    <td>{player.completedQuestions?.length || 0}</td>\n                                    <td>\n                                        {player.currentQuestion ? `Question ${player.currentQuestion}` : 'Not started'}\n                                    </td>\n                                    <td>\n                                        {player.isPlaying ? (\n                                            <span className=\"text-success\">Playing</span>\n                                        ) : (\n                                            <span className=\"text-muted\">Completed</span>\n                                        )}\n                                    </td>\n                                    <td>\n                                        {new Date(player.timestamp).toLocaleString()}\n                                    </td>\n                                </tr>\n                            ))}\n                            {players.length === 0 && (\n                                <tr>\n                                    <td colSpan=\"7\" className=\"text-center\">\n                                        No players found\n                                    </td>\n                                </tr>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Admin; ","import React from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport Login from './components/Login';\nimport Quiz from './components/Quiz';\nimport Admin from './components/Admin';\nimport './styles/index.css';\n\nfunction App() {\n  return (\n    <Router basename=\"/quiz-game\">\n      <div className=\"App\">\n        <Routes>\n          <Route exact path=\"/\" element={<Login />} />\n          <Route path=\"/quiz\" element={<Quiz />} />\n          <Route path=\"/admin\" element={<Admin />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}